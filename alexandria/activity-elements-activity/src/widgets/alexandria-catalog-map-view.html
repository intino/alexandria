<link rel="import" href="../../lib/polymer/polymer.html">
<link rel="import" href="../../lib/cotton-push/cotton-push-behavior.html">
<link rel="import" href="../../lib/cotton-carrier/cotton-carrier-behavior.html">
<link rel="import" href="../../lib/cotton-zombie/cotton-zombie.html">
<link rel="import" href="../../lib/cotton-translator/cotton-translator-behavior.html">
<link rel="import" href="_common/catalog/alexandria-catalog-view-behavior.html">
<link rel="import" href="_common/catalog/alexandria-catalog-map.html">

<script src="alexandriacatalogmapview/requester.js"></script>
<script src="alexandriacatalogmapview/notifier-listener.js"></script>

<dom-module id="alexandria-catalog-map-view">

    <template>
        <alexandria-catalog-map page-size="[[_pageSize]]"
                                item-list="[[_itemList]]"
                                count-item-list="[[_countItemList]]"
                                center="[[_view.center]]"
                                zoom="[[_view.zoom]]"
                                on-location-change="_loadLocation"
                                on-page-change="_loadPage"
                                toolbar="[[_view.toolbar]]"
                                on-execute-operation="_executeOperation"
                                on-download-operation="_downloadOperation"
                                on-load-item="_loadItem"
                                on-open-item="_openItem"></alexandria-catalog-map>
    </template>

    <style>
    </style>

    <script>

        const AlexandriaCatalogMapViewDictionary = {
            es: {
            },
            en: {
            }
        };

        Polymer({
            is: 'alexandria-catalog-map-view',

            behaviors: [ CottonBehaviors.CarrierBehavior,
                CottonBehaviors.PushBehavior,
                CottonBehaviors.TranslatorBehavior,
                AlexandriaBehaviors.CatalogViewBehavior,
                AlexandriaCatalogMapViewBehaviors.Requester,
                AlexandriaCatalogMapViewBehaviors.NotifierListener ],

            properties : {
                _view: Object,
                _itemList: Array,
                _countItemList: Number
            },

            attached : function() {
                this.translate(AlexandriaCatalogMapViewDictionary);
                this.translate(AlexandriaBehaviors.CatalogViewBehavior.Dictionary);
                this.listenToDisplay();
            },

            _refreshView : function(view) {
                this._view = view;
            },

            _clear : function() {
                this.querySelector("alexandria-catalog-map").clear();
            },

            _refresh : function(items) {
                this._itemList = items;
            },

            _refreshPageSize : function(size) {
                this._pageSize = size;
            },

            _refreshItem : function(item) {
                this.querySelector("alexandria-catalog-map").refreshItem(item);
            },

            _refreshCount : function(count) {
                this._countItemList = count;
            },

            _refreshSelection : function(selection) {
            },

            _loadLocation : function(event) {
                this.location(event.detail);
            },

            _loadPage : function(event) {
                this.page(event.detail.page);
            },

            _executeOperation : function(e) {
                this.executeOperation(e.detail);
            },

            _downloadOperation : function(e) {
                this.downloadOperation(e.detail);
            },

            _loadItem : function(e) {
                this.loadItem(e.detail);
            },

            _openItem : function(e) {
                this.openItem(e.detail.name);
            }

        });
    </script>
</dom-module>