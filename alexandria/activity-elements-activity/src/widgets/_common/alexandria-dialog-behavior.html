<script>
    'use strict';

    var AlexandriaBehaviors = AlexandriaBehaviors || {};

    AlexandriaBehaviors.DialogBehavior = {

        properties : {
            _width : { type: Number, value: function() { return 100; } },
            _height : { type: Number, value: function() { return 100; } }
        },

        listeners: { 'iron-resize': '_fitDialog' },

        _fitDialog : function() {
            var style = "";

            if (this._width != 100) {
                var width = $(window).width();
                style += ";width:" + this._width + "%;margin-left:" + ((width-(width*(this._width / 100)))/2) + "px;";
            }
            else style += ";width:calc(100% - 100px)";

            if (this._height != 100) {
                var height = $(window).height();
                style += ";height:" + this._height + "%;margin-top:" + ((height - (height * (this._height / 100))) / 2) + "px;";
            }
            else style += ";height:calc(100% - 100px)";

            this.$.dialog.style.cssText += style;
        },

        open : function() {
            this._fitDialog();
            this.$.dialog.open();
        },

        close : function() {
            this.$.dialog.close();
        },

        _overlayOpened : function(e) {
            var dialog = e.target;
            var overlay = dialog.backdropElement;

            if (overlay.previousSibling !== dialog && !this._overlayFixed) {
                dialog.parentNode.insertBefore(overlay, null);
                this._overlayFixed = true;
            }
        },

        _overlayClosed : function(e) {
            this._overlayFixed = false;
        },

        _closeDialog : function() {
            this.close();
        }

    };

</script>