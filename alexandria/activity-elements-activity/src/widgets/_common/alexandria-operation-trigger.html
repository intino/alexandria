<link rel="import" href="../../../lib/polymer/polymer.html">
<link rel="import" href="../../../lib/cotton-translator/cotton-translator-behavior.html">
<link rel="import" href="../../../lib/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../lib/paper-button/paper-button.html">
<link rel="import" href="../../../lib/cotton-chip/cotton-chip.html">

<dom-module id="alexandria-operation-trigger">

    <template>
        <div class$="mode [[mode]]">
            <paper-icon-button style$="color:[[_color]];" class="option Icon" id="iconOperation" icon="[[icon]]" title="[[_title]]" on-tap="_execute"></paper-icon-button>
            <paper-button style$="color:[[_color]];" class="option Button" on-tap="_execute">[[_title]]</paper-button>
            <a style$="color:[[_color]];" class="option Link" title="[[_title]]" on-tap="_execute">[[_title]]</a>
            <cotton-chip style$="color:[[_color]];" class="option Chip" text="[[_title]]" icon="[[icon]]" on-tap="_execute"></cotton-chip>
        </div>
    </template>

    <style>
        :host {
            display: block;
        }
        :host paper-button {
            margin-top: 10px;
            margin-bottom: 10px;
            padding: 5px;
            text-align: center;
        }
        :host a {
            color: var(--default-primary-color);
            cursor: pointer;
        }
        :host .mode .option {
            display: none;
        }
        :host .mode.Icon .option.Icon {
            display: block;
        }
        :host .mode.Button .option.Button {
            display: block;
        }
        :host .mode.Link .option.Link {
            display: block;
        }
        :host .mode.Chip .option.Chip {
            display: block;
        }
    </style>

    <script>
        const AlexandriaOperationTriggerDictionary = {
            es: {
                Execute: "ejecutar..."
            },
            en: {
                Execute: "execute..."
            }
        };

        Polymer({
            is: 'alexandria-operation-trigger',

            behaviors: [ CottonBehaviors.TranslatorBehavior ],

            properties : {
                title : { type: String, observer: "_refreshTitle" },
                _title : String,
                icon : String,
                styles : String,
                mode : String,
                _color: String
            },

            attached: function () {
                this.translate(AlexandriaOperationTriggerDictionary);
                this._fillColor();
            },

            _refreshTitle : function() {
                this._title = this.title != null && this.title != "" ? this.title : this.Execute;
            },

            _execute : function(e) {
                this.fire("execute");
                e.stopPropagation();
            },

            _fillColor : function() {
                var defaultColor = getComputedStyle(document.body).getPropertyValue('--default-primary-color');
                var drawingColor = this._drawingColor();
                this._color = drawingColor != null ? drawingColor : defaultColor;
            },

            _drawingColor : function() {
                if (this.stamp == null) return null;
                if (this.stamp.properties == null) return null;
                return this.stamp.properties.drawingColor != "" ? this.stamp.properties.drawingColor : null;
            }

        });
    </script>

</dom-module>
