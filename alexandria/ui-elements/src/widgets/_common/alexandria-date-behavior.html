<script>
    'use strict';

    var AlexandriaBehaviors = AlexandriaBehaviors || {};

    AlexandriaBehaviors.DateBehavior = {
        Dictionary : {
            es : {
                YearFormat: '::year::',
                YearFormatShort: '::year::',
                QuarterOfYearFormat: '::date:: trimestre de ::year::',
                QuarterOfYearFormatShort: '::date:: trim. ::year::',
                MonthFormat: '::date:: de ::year::',
                MonthFormatShort: '::month:: ::year::',
                WeekFormat: 'semana ::date:: de ::year::',
                WeekFormatShort: 'sem. ::date:: ::year::',
                DayFormat: '::date:: de ::month:: de ::year::',
                DayFormatShort: '::numericDay::',
                SixHoursFormat: '::date:: horas del ::fullDay::',
                SixHoursFormatShort: '::date:: ::numericDay::',
                HourFormat: '::date:: horas del ::fullDay::',
                HourFormatShort: '::date:: ::numericDay::',
                FifteenMinutesFormat: '::date:: minutos del ::fullDay::',
                FifteenMinutesFormatShort: '::date:: ::numericDay::',
                MinuteFormat: '::date:: minutos del ::fullDay::',
                MinuteFormatShort: '::date:: ::numericDay::',
                SecondFormat: 'segundo ::date:: de ::fullDay::',
                SecondFormatShort: '::date:: ::numericDay::',
                NumericDayFormat: 'L',
                FullDayFormat: 'dddd, DD [de] MMMM [de] YYYY',
                First: '1er',
                Second: '2do',
                Third: '3er',
                Fourth: '4to'
            },
            en : {
                YearFormat: '::year::',
                YearFormatShort: '::year::',
                QuarterOfYearFormat: '::date:: quarter of ::year::',
                QuarterOfYearFormatShort: '::date:: quarter ::year::',
                MonthFormat: '::date:: of ::year::',
                MonthFormatShort: '::month:: ::year::',
                WeekFormat: 'week ::date:: of ::year::',
                WeekFormatShort: 'week ::date:: ::year::',
                DayFormat: '::date:: of ::month:: of ::year::',
                DayFormatShort: '::numericDay::',
                SixHoursFormat: '::date:: hours of ::fullDay::',
                SixHoursFormatShort: '::numericDay:: ::date::',
                HourFormat: '::date:: hours of ::fullDay::',
                HourFormatShort: '::numericDay:: ::date::',
                FifteenMinutesFormat: '::date:: minutes of ::fullDay::',
                FifteenMinutesFormatShort: '::numericDay:: ::date::',
                MinuteFormat: '::date:: minutes of ::fullDay::',
                MinuteFormatShort: '::numericDay:: ::date::',
                SecondFormat: 'second ::date:: of ::fullDay::',
                SecondFormatShort: '::numericDay:: ::date::',
                NumericDayFormat: 'L',
                FullDayFormat: 'dddd, DD [of] MMMM [of] YYYY',
                First: '1st',
                Second: '2nd',
                Third: '3th',
                Fourth: '4th'
            }
        },

        fullDate : function(date, scale, language, short) {
            var formattedDate = this._formatter(scale, short != null ? short : false);

            if (formattedDate == null) return "";
            moment.locale(language);

            formattedDate = formattedDate.replace('::date::', this._fullDate(date, scale, language));
            formattedDate = formattedDate.replace('::year::', this.yearOf(date, language));
            formattedDate = formattedDate.replace('::month::', this.monthOf(date, language));
            formattedDate = formattedDate.replace('::day::', this.dayOf(date, language));
            formattedDate = formattedDate.replace('::fullDay::', this.fullDayOf(date, language));
            formattedDate = formattedDate.replace('::numericDay::', this.numericDayOf(date, language));

            return formattedDate;
        },

        shortFullDate : function(date, scale, language) {
            return this.fullDate(date, scale, language, true);
        },

        numericDate : function(date, scale, language) {
            moment.locale(language);
            return this.numericDayOf(date, language);
        },

        yearOf : function(date, language) {
            moment.locale(language);
            return moment(date).format('YYYY');
        },

        quarterOf: function(date, language) {
            moment.locale(language);
            var quarter = moment(date).format('Q');
            if (quarter == 1) return AlexandriaBehaviors.DateBehavior.Dictionary[language].First;
            if (quarter == 2) return AlexandriaBehaviors.DateBehavior.Dictionary[language].Second;
            if (quarter == 3) return AlexandriaBehaviors.DateBehavior.Dictionary[language].Third;
            if (quarter == 4) return AlexandriaBehaviors.DateBehavior.Dictionary[language].Fourth;
        },

        monthOf: function(date, language) {
            moment.locale(language);
            return moment(date).format("MMMM");
        },

        weekOf: function(date, language) {
            moment.locale(language);
            return moment(date).format('W');
        },

        dayOf: function(date, language) {
            moment.locale(language);
            return moment(date).format("dddd, DD");
        },

        fullDayOf: function(date, language) {
            moment.locale(language);
            return moment(date).format(AlexandriaBehaviors.DateBehavior.Dictionary[language].FullDayFormat);
        },

        numericDayOf: function(date, language) {
            moment.locale(language);
            return moment(date).format(AlexandriaBehaviors.DateBehavior.Dictionary[language].NumericDayFormat);
        },

        minuteOf: function(date, language) {
            moment.locale(language);
            return moment(date).format('LT');
        },

        secondOf: function(date, language) {
            moment.locale(language);
            return moment(date).format('LTS');
        },

        _fullDate : function(date, scale, language) {
            if (scale == 'Year') return this.yearOf(date, language);
            if (scale == 'QuarterOfYear') return this.quarterOf(date, language);
            if (scale == 'Month') return this.monthOf(date, language);
            if (scale == 'Week') return this.weekOf(date, language);
            if (scale == 'Day') return this.dayOf(date, language);
            if (scale == 'SixHours' || scale == 'Hour' || scale == 'FifteenMinutes' || scale == 'Minute') return this.minuteOf(date, language);
            if (scale == 'Second') return this.secondOf(date);
        },

        _formatter : function(scale, short) {
            return this[scale + "Format" + (short ? "Short" : "")];
        }

    };

</script>
