dsl Teseo

Service(title = "Cesar Ops Service", path = "") cesar as REST
	WithCertificate(store = "sample/", storePassword = "123456")
	Resource(name = "createSystem", title = "Create new system", path = "systems", type = Put)
		Parameter(name = "name", in = path) as Text
		Parameter(name = "time", in = query) as DateTime
		Parameter(name = "repository", in = query) as Text
		Response

	Resource(name = "systems", title = "List of systems", path = "systems", type = Get)
		Response as Text
		Exception(ErrorBadRequest)
	Resource(name = "system", title = "A system", path = "systems", type = Get)
		Parameter(name = "system", in = path) as Text
		Parameter(name = "version", in = path) as Text
		Response as Text
		Exception(ErrorBadRequest)
	Resource(name = "updateSystem", title = "Update system", path = "systems", type = Post)
		Parameter(name = "system", in = path) as Text
		Parameter(name = "enabled", in = query) as Bool
		Response
		Exception(ErrorBadRequest)
	Resource(name = "createSystemVersion", title = "Create new system version", path = "systems", type = Put)
		Parameter(name = "system", in = path) as Text
		Parameter(name = "version", in = query) as Text
		Response
		Exception(ErrorBadRequest)

	Resource(name = "servers", title = "List of servers", path = "servers", type = Get)
		Response as Text
		Exception(ErrorBadRequest)
	Resource(name = "server", title = "A server", path = "servers", type = Get)
		Parameter(name = "server", in = path) as Text
		Response as Text
		Exception(ErrorBadRequest)
	Resource(name = "createServer", title = "Create server", path = "server", type = Post)
		Parameter(name = "url", in = query) as Text
		Response
		Exception (ErrorBadRequest)
	Resource(name = "updateServer", title = "Update server", path = "servers", type = Post)
		Parameter(name = "server", in = path) as Text
		Response
		Exception(ErrorBadRequest)
	Resource(name = "deleteServer", title = "Delete server", path = "servers", type = Delete)
		Parameter(name = "server", in = path) as Text
		Response
		Exception(ErrorBadRequest)
	Resource(name = "deploySystem", title = "Deploy system", path = "servers", type = Post)
		Parameter(name = "server", in = path) as Text
		Parameter(name = "system", in = path) as Text
    	Parameter(name = "isPublic", in = query) as Bool
    	Response

Service(title = "Cesar Build Service", path = "build") build as REST
	Resource(name = "listWebHook", title = "", path = "webhooks", type = Post)
		Response
		Exception(ErrorBadRequest)

Trigger scheduleServerLogging as Cron(pattern = "0 0/2 * * * *", mean = "everyTwoMinutes")
Trigger scheduleSystemLogging as Cron(pattern = "0 * * * * *", mean = "everyMinute")
