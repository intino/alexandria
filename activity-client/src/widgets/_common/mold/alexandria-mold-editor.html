<link rel="import" href="../../../../lib/polymer/polymer.html">
<link rel="import" href="../../../../lib/cotton-translator/cotton-translator-behavior.html">
<link rel="import" href="../../../../lib/cotton-zombie/cotton-zombie.html">
<link rel="import" href="../../../../lib/paper-input/paper-input.html">

<dom-module id="alexandria-mold-editor">

    <template>
        <paper-input no-label-float value="{{value}}" on-keydown="_keyDown" on-blur="_close"></paper-input>
    </template>

    <style>
        :host {
            margin-top: -1px;
        }
        :host paper-input {
            --paper-input-container : {
                padding: 0;
            };
            --paper-input-container-input : {
                border: 1px solid #ddd;
                background: #efefef;
                font-size: 11pt;
                line-height: 19px;
            };
            --paper-input-container-underline : {
                display: none;
            };
            --paper-input-container-underline-focus : {
                display: none;
            };
            --paper-input-container-underline-disabled : {
                display: none;
            };
        }
    </style>

    <script>
        const AlexandriaMoldEditorDictionary = {
            es: {
            },
            en: {
            }
        };

        Polymer({
            is: 'alexandria-mold-editor',

            behaviors: [ CottonBehaviors.TranslatorBehavior ],

            properties : {
                label: String,
                value: String
            },

            attached: function () {
                this.translate(AlexandriaMoldEditorDictionary);
            },

            focus : function() {
                window.setTimeout(() => {
                    let input = this.querySelector("paper-input").$.input;
                    input.focus();
                    input.setSelectionRange(0, input.value.length);
                }, 50);
            },

            _close : function(e) {
                this.fire("close");
            },

            _keyDown : function(e) {
                if (event.keyCode == 27) this.fire("close");
                else if (event.keyCode == 13)
                    this.fire("save", this.value);
            }

        });
    </script>

</dom-module>
