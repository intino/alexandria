dsl Konos


DataHubTerminal(url = "{bus_url}", user = "{user}", password = "pass", clientId = "clientId") as JmsBus

Datamart("{datamart}") datamart

Datalake datalake as NfsMirrored
	path = "{datalake_path}"
	originDatalakePath = "{datalake_origin_path}"
	startingTimetag = "20190101"


Mounter(datamart = datamart, format = Arff) inspeccionados as Population
	Split("DA" "DB") porDivisiones
	Source("Revision.Inspeccion", type = Long) as Id
	Source("Revision.Inspeccion", type = Timetag)
	Source("EsCFE", type = Boolean)  as Constant(value = "sss")
	Source("EsEmpleado", type = Boolean)
	Source("Giro", type = Nominal)
	Source("Estatus", type = String)
	Source("Poblacion.Tipo", type = String)
	Source("Contrato.Potencia", type = String)
	Source("Contrato.Firma", type = String)
	Source("Contrato.Alta", type = String)
	Source("Contrato.Baja", type = String)
	Source("Contrato.Estatus", type = String)
	Source("Periodicidad", type = String)
	Source("Modo", type = String)
	Source("EsColectiva", type = String)
	Source("EsEspecial", type = String)
	Source("EsPuntual", type = String)
	Source("Tarifa.Tipo", type = String)
	Source("Conexiones", type = String)
	Source("Conexion.Tipo", type = String)
	Source("Conexion.Hilos", type = String)
	Source("Conexion.PorteaEnergia", type = String)
	Source("Conexion.GeneraEnergiaRenovable", type = String)
	Source("Conexion.Potencia", type = String)
	Source("Conexion.Conectado", type = String)
	Source("Conexion.Desconectado", type = String)
	Source("Conexion.Reconectado", type = String)
	Source("Medidor.Tipo", type = String)
	Source("Medidor.Estatus", type = String)
	Source("Caratulas", type = String)
	Source("Multiplicador", type = String)
	Source("Instalado", type = String)
	Source("Retirado", type = String)
	Source("Conectado", type = String)
	Source("Desconectado", type = String)
	Source("Sellado", type = String)
	Source("Cambiado", type = String)
	Source("Fecha", type = String)
	Source("Lectura.Tipo", type = String)
	Source("Lectura.Negativa", type = String)
	Source("Consumo.Facturado", type = String)
	Source("Consumo.NoFacturado", type = String)
	Source("Consumo.MalFacturado", type = String)
	Source("Consumo.Abatimiento", type = String)
	Source("Consumo.FacturaAbatida", type = String)
	Source("Consumo.PromedioDiario", type = String)
	Source("Consumo.Plano", type = String)
	Source("Consumo.DiferenciaConMaxCPD", type = String)
	Source("Demanda.PromedioDiario", type = String)
	Source("Demanda.FactorCarga", type = String)
	Source("Demanda.FactorCargaPromedioDiario", type = String)
	Source("Demanda.FactorPotencia", type = String)
	Source("Revision.Inspeccionado", type = String)

Mounter(datamart = datamart) ajustes as Realtime("subs1")
	Source("asemed.Ajuste", schema = Ajuste)

Mounter(datamart = datamart) criterios as Realtime("subs2")
	Source("asemed.Criterio", schema = Criterio)
	Source("asemed.CriterioBorrado", schema = CriterioBorrado)

Feeder("asemed.Ajuste") ajusteFeeder
Feeder("asemed.Criterio" "asemed.CriterioBorrado") criteriosFeeder

Schema Evento
	Attribute ts as DateTime
	Attribute autor as Text

Schema Criterio as ExtensionOf(Evento)
	Attribute nombre as Text
	Attribute descripcion as Text
	Attribute tipo as Text
	Attribute filtroInteligente as Text
	Attribute divisiones as Text List

Schema CriterioBorrado as ExtensionOf(Evento)
	Attribute criterio as Text

Schema CriterioModificado as ExtensionOf(Evento)
	Attribute criterio as Text
	Attribute descripcion as Text
	Attribute tipo as Text
	Attribute filtroInteligente as Text
	Attribute divisiones as Text List

Schema CriterioEvolucionado as ExtensionOf(Evento)
	Attribute criterio as Text

Schema CriterioConsultaModificada as ExtensionOf(Evento)
	Attribute criterio as Text
	Attribute consulta as Text
	Attribute esValida as Bool

Schema CriterioSentencia as ExtensionOf(Evento)
	Attribute criterio as Text
	Attribute consulta as Text
	Attribute descripcion as Text
	Attribute tipo as Text
	Attribute esValida as Bool

Schema CriterioSentenciaModificada as ExtensionOf(Evento)
	Attribute criterio as Text
	Attribute sentencia as Text
	Attribute descripcion as Text
	Attribute consulta as Text
	Attribute esValida as Bool

Schema CriterioSentenciaBorrada as ExtensionOf(Evento)
	Attribute criterio as Text
	Attribute sentencia as Text

Schema CriterioHabilitado as ExtensionOf(Evento)
	Attribute criterio as Text

Schema CriterioDeshabilitado as ExtensionOf(Evento)
	Attribute criterio as Text

Schema Despacho as ExtensionOf(Evento)
	Attribute nombre as Text
	Attribute rpu as LongInteger

Schema Inspeccion as ExtensionOf(Evento)
	Attribute revision as Text

Schema Ajuste as ExtensionOf(Evento)
	Attribute revision as Text

Schema UsuarioConectado as ExtensionOf(Evento)
Schema UsuarioDesconectado as ExtensionOf(Evento)