dsl Konos

Service(description = "Interface for recovering all dashboard inschemaion") rest as REST(host = "", basePath = "/dashboard")
	Resource(path = "/categorizations") categorizations
		Get(description="List of categorizations")
			Response as Object(schema = CategorizationCatalogResponseSchema)
	Resource(path = "/summary") summary
		Get(description = "Opinions summary")
			Response as Object(schema = SummaryResponseSchema)

	Resource(path = "/snapshot")snapshot
		Get(description = "Summary of opinions at some Instant")
			Parameter(in = query) scale as Text
			Parameter(in = body) range as Object(schema = RangeSchema)
			Parameter(in = body) filters as Object(schema = FilterListSchema)
			Response as Object(schema = OpinionSnapshotResponseSchema)

	Resource(path = "/snapshot/:id/download") downloadSnapshot
		Get (description="Download opinions at some Instant") DDD
			Parameter(in = path, required = true) id as Text
			Parameter(in = query, required = true) username as Text
			Parameter(in = query) language as Text
			Response as File
			Exception(code = Unauthorized)

Schema RangeSchema
	Attribute from as DateTime
	Attribute to as DateTime

Schema FilterListSchema
	Attribute(multiple=true) filters as Text

Schema CategorizationCatalogResponseSchema
	Attribute name as Text
	Attribute label as Text
	Schema category
		Attribute name as Text
		Attribute label as Text

Schema SummaryResponseSchema
	Schema(multiple=false) today
		Schema(multiple=false) count
			Attribute total as Integer

	Schema(multiple=false) total
		Schema(multiple=false) count
			Attribute total as Integer
			Attribute satisfied as Integer
			Attribute notVerySatisfied as Integer
			Attribute dissatisfied as Integer

		Schema(multiple=false) difference
			Attribute satisfied as Real
			Attribute notVerySatisfied as Real
			Attribute dissatisfied as Real

Schema OpinionSnapshotResponseSchema
	Attribute Instant as DateTime
	Attribute scale as Text
	Schema(multiple=false) count
		Attribute total as Integer
		Attribute satisfied as Integer
		Attribute notVerySatisfied as Integer
		Attribute dissatisfied as Integer
	Schema(multiple=false) difference
		Attribute satisfied as Real
		Attribute notVerySatisfied as Real
		Attribute dissatisfied as Real

	Schema(multiple=false) timeLine
		Schema point
			Attribute Instant as DateTime
			Attribute value as Real