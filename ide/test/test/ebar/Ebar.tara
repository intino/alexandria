dsl Konos

Service ebarUI as UI(title = "", favicon = "")

	Resource("/", application) home as Root Confidential
	Resource("/error", error) errorPage

Display application
	displays = stationCatalog

	Notification userRefresh as Object(User)
	Notification userLoggedOut

	Request logout as Text

Display pageDisplay
	Notification(Client) clear as Text
	Notification(Client) refreshCount as Integer

	Request page as Integer

Display stationCatalog
	displays = episodeCatalog

	Notification(Client) refresh as Object(StationList)
	Notification(Client) refreshSelection as Object(Selection)

	Request state
	Request location as Object(Bounds)
	Request selection as Object(Selection)

Display episodeCatalog
	displays = episodeCatalogToolbar

	Notification(Client) refresh as Object(EpisodeList)

	Request(Asset) downloadEpisode as Text

Display episodeCatalogToolbar
	Notification refresh as Object(ToolbarInfo)

	Request previousInstant
	Request nextInstant
	Request setInstant as Date

Display error


Schema User
	Attribute username as Text
	Attribute fullName as Text
	Attribute email as Text
	Attribute photo as Text
	Attribute language as Text

Schema StationList
	Schema Station
		Attribute name as Text
		Attribute label as Text
		Attribute latitude as Integer
		Attribute longitude as Integer
		Attribute icon as Text
		Attribute floatLevel as Integer
		Attribute pumpAState as Integer
		Attribute pumpBState as Integer

Schema EpisodeList
	Schema Episode
		Attribute name as Text
		Attribute label as Text
		Attribute Instant as Integer
		Attribute icon as Text

Schema Bounds
	Schema NorthEast
		Attribute longitude as Text
		Attribute latitude as Text

	Schema SouthWest
		Attribute longitude as Text
		Attribute latitude as Text

Schema Selection
	Attribute(multiple=true) items as Text

Schema ToolbarInfo
	Attribute count as Integer
	Attribute Instant as Integer