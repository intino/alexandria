dsl Konos

Service AmidasTask as REST(basePath = "/api/task", host = "{host}", port = "{port}")

	Resource(path="request/edition") requestForEdition
		Put
			Parameter(in=query) token as Text
			Parameter(in=query) properties as Object(RequestProperties)
			Parameter(in=query) policy as Object(RequestPolicy)
			Parameter(in=query) document as Text
			Parameter(in=query) editor as Text

			Response taskId as Text
			Exception(BadRequest)
			Exception(Conflict)

	Resource(path="request/decision") requestForDecision
		Put
			Parameter(in=query) token as Text
			Parameter(in=query) properties as Object(RequestProperties)
			Parameter(in=query) policy as Object(RequestPolicy)

			Response taskId as Text
			Exception(BadRequest)
			Exception(Conflict)

	Resource(path="request/document/sign") requestForDocumentSignature
		Put
			Parameter(in=query) token as Text
			Parameter(in=query) properties as Object(RequestProperties)
			Parameter(in=query) policy as Object(RequestPolicy)
			Parameter(in=form) document as File
			Parameter(in=query) signatureId as Text

			Response taskId as Text
			Exception(BadRequest)
			Exception(Conflict)

	Resource(path="request/document/edition") requestForDocumentEdition
		Put
			Parameter(in=query) token as Text
			Parameter(in=query) properties as Object(RequestProperties)
			Parameter(in=query) policy as Object(RequestPolicy)

			Response taskId as Text
			Exception(BadRequest)
			Exception(Conflict)

	Resource(path=":task/document") taskDocument
		Get
			Parameter(in=query) token as Text
			Parameter(in=path) task as Text

			Response as File
			Exception(BadRequest)
			Exception(NotFound)
			Exception(Conflict)

		Post
			Parameter(in=query) token as Text
			Parameter(in=path) task as Text
			Parameter(in=query) completed as Bool
			Parameter(in=form) document as File

			Response as Bool
			Exception(BadRequest)
			Exception(NotFound)
			Exception(Conflict)

	Resource(path=":task/complete") completeTask
		Post
			Parameter(in=query) token as Text
			Parameter(in=path) task as Text
			Response as Bool
			Exception(BadRequest)
			Exception(NotFound)
			Exception(Conflict)

Schema RequestProperties
	Attribute label as Text
	Attribute description as Text
	Attribute priority as Text

Schema RequestPolicy
	Attribute workerGroups as Text List
	Attribute capabilities as Text List
	Attribute authorizations as Text List

Schema Solicitud
    Attribute solicitudDocumentoList as List Object(SolicitudDocumento)
Schema SolicitudDocumento
    Attribute descripcion as Text
    Attribute fichero as File